<!-- Cyberpunk Music Widget -->
<div id="music-widget" style="position: fixed; bottom: 20px; left: 20px; z-index: 9999; display: flex; align-items: center; gap: 10px; background: rgba(0, 0, 0, 0.8); padding: 10px; border-radius: 50px; border: 2px solid #00f3ff; box-shadow: 0 0 10px #00f3ff; transition: all 0.3s ease;">
  <!-- Play/Pause Button with Vinyl Animation -->
  <div id="play-btn" onclick="toggleMusic()" style="width: 40px; height: 40px; border-radius: 50%; background: #111; border: 2px solid #fff; cursor: pointer; position: relative; display: none; align-items: center; justify-content: center; animation: none;">
    <span id="play-icon" style="font-size: 14px; color: #fff;">â–¶</span>
  </div>

  <!-- Scrolling Text -->
  <div style="display: none;" id="music-info">
    <span style="color: #00f3ff; font-family: monospace; font-size: 12px;">ğŸµ Lo-fi Gaming Chill Beats</span>
  </div>

  <audio id="bg-music" loop></audio>

  <div class="turntable" style="display:flex; align-items:center; gap:12px;">
    <div class="deck" style="position:relative; width:160px; height:110px; background: linear-gradient(145deg, #0d0d0d, #1a1a1a); border: 1px solid #2af5ff; border-radius: 12px; box-shadow: inset 0 0 8px rgba(0,243,255,0.3), 0 0 12px rgba(0,243,255,0.4); display:flex; align-items:center; justify-content:center;">
      <div class="disc" style="width:86px; height:86px; border-radius:50%; background: radial-gradient(circle at 30% 30%, #202020 0%, #121212 40%, #0a0a0a 70%, #090909 100%); box-shadow: 0 0 10px rgba(0,243,255,0.2), inset 0 0 6px rgba(255,255,255,0.06); position:relative;"></div>
      <div class="spindle" style="position:absolute; width:8px; height:8px; border-radius:50%; background:#e33; box-shadow: 0 0 6px #e33;">
      </div>
      <div id="tonearm" style="position:absolute; width:90px; height:6px; background: linear-gradient(90deg, #cfcfcf, #8b8b8b); top:22px; right:10px; transform-origin: 6px 3px; transform: rotate(-32deg); transition: transform 0.25s ease; border-radius:3px; box-shadow: 0 0 6px rgba(255,255,255,0.2); cursor:pointer;"></div>
    </div>
    <div class="ctrl" style="display:flex; align-items:center; gap:6px;">
      <input id="music-url" type="text" placeholder="è¾“å…¥éŸ³é¢‘é“¾æ¥" style="width:180px; height:28px; background:#0f0f0f; color:#00f3ff; border:1px solid #00f3ff; border-radius:6px; padding:0 8px; outline:none;" />
      <button id="load-btn" style="height:28px; padding:0 10px; background:#111; color:#00f3ff; border:1px solid #00f3ff; border-radius:6px; cursor:pointer;">æ’­æ”¾</button>
    </div>
  </div>
</div>

<script>
  const musicWidget = document.getElementById('music-widget');
  const audio = document.getElementById('bg-music');
  const tonearm = document.getElementById('tonearm');
  const disc = musicWidget.querySelector('.disc');
  const urlInput = document.getElementById('music-url');
  const loadBtn = document.getElementById('load-btn');
  let isPlaying = false;

  const defaultSrc = 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3';
  audio.src = defaultSrc;
  audio.preload = 'none';

  function play() {
    audio.play().then(() => {
      isPlaying = true;
      disc.classList.add('spin');
      tonearm.classList.add('down');
    }).catch(() => {});
  }

  function pause() {
    audio.pause();
    isPlaying = false;
    disc.classList.remove('spin');
    tonearm.classList.remove('down');
  }

  function toggleMusic() {
    if (isPlaying) pause(); else play();
  }

  tonearm.addEventListener('click', toggleMusic);
  loadBtn.addEventListener('click', () => {
    const v = urlInput.value.trim();
    if (!v) return;
    if (audio.src !== v) audio.src = v;
    audio.load();
    play();
  });
  urlInput.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') {
      loadBtn.click();
    }
  });
  audio.addEventListener('ended', () => pause());
  audio.addEventListener('error', () => pause());
</script>

<style>
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
  #music-widget .disc.spin { animation: spin 3s linear infinite; }
  #tonearm.down { transform: rotate(8deg); }
  #music-widget:hover { box-shadow: 0 0 14px #00f3ff; }
  /* ç§»åŠ¨ç«¯é€‚é…ï¼šå˜å°ä¸€ç‚¹ */
  @media (max-width: 768px) {
    #music-widget { bottom: 10px; left: 10px; transform: scale(0.8); transform-origin: bottom left; }
  }
</style>
